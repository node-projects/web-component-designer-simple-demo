import { NodeType } from "../../../item/NodeType.js";
export class InsertAction {
  constructor(designItem, index, newItem) {
    this.title = "Insert Item";
    this.designItem = designItem;
    this.index = index;
    this.newItem = newItem;
  }

  get affectedItems() {
    return [this.designItem];
  }

  undo() {
    this.newItem.element.remove();
  }

  do() {
    if (this.index == 0) this.designItem.element.insertAdjacentElement('afterbegin', this.newItem.element);else {
      let el = this.designItem.element.children[this.index - 1];
      if (this.newItem.nodeType == NodeType.Element) el.insertAdjacentElement('afterend', this.newItem.element);else if (this.newItem.nodeType == NodeType.TextNode) {
        el.insertAdjacentText('afterend', this.newItem.node.textContent);
      }
    }
  }

  mergeWith(other) {
    return false;
  }

}