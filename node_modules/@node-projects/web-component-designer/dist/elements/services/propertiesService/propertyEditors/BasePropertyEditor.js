import { ValueType } from '../ValueType.js';
export class BasePropertyEditor {
    element;
    property;
    designItems;
    disableChangeNotification = false;
    constructor(property) {
        this.property = property;
    }
    _valueChanged(newValue) {
        if (!this.disableChangeNotification) {
            if (this.designItems && this.designItems.length) {
                const cg = this.designItems[0].openGroup("set property: " + this.property.name);
                for (let d of this.designItems) {
                    if (newValue == null)
                        this.property.service.clearValue([d], this.property);
                    else
                        this.property.service.setValue([d], this.property, newValue);
                }
                cg.commit();
            }
        }
    }
    designItemsChanged(designItems) {
        this.designItems = designItems;
    }
    refreshValueWithoutNotification(valueType, value) {
        if (valueType == ValueType.none)
            this.element.classList.add('unset-value');
        else
            this.element.classList.remove('unset-value');
        this.disableChangeNotification = true;
        try {
            this.refreshValue(valueType, value);
        }
        catch (err) {
            console.error(err);
        }
        this.disableChangeNotification = false;
    }
}
