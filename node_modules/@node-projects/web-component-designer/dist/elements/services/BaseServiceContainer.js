export class BaseServiceContainer {
    constructor() {
        this._services = new Map();
    }
    getLastService(service) {
        let list = this._services.get(service);
        if (list && list.length)
            return list[list.length - 1];
        return null;
    }
    getServices(service) {
        return this._services.get(service);
    }
    register(name, service) {
        if (!this._services.has(name))
            this._services.set(name, []);
        this._services.get(name).push(service);
    }
    forSomeServicesTillResult(service, callback) {
        let services = this.getServices(service);
        if (services == null) {
            console.warn('no services of type: ' + service + ' found');
            return null;
        }
        for (let index = services.length - 1; index >= 0; index--) {
            const currentService = services[index];
            let result = callback(currentService);
            if (result != null)
                return result;
        }
        return null;
    }
    getLastServiceWhere(service, callback) {
        let services = this.getServices(service);
        if (services == null) {
            console.warn('no services of type: ' + service + ' found');
            return null;
        }
        for (let index = services.length - 1; index >= 0; index--) {
            const currentService = services[index];
            let result = callback(currentService);
            if (result)
                return currentService;
        }
        return null;
    }
}
